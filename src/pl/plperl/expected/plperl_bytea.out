create function test_perl_bytea(str bytea) 
returns bytea
language plperl as
$func$

my $arg = shift;
my $enc = $arg;
$enc =~ s/(.)/sprintf("%.2x",ord($1))/egs;
elog(NOTICE,"encoded: $enc");
return $arg;

$func$;
select test_perl_bytea('\x01020304f1f2f3f4');
NOTICE:  encoded: 01020304f1f2f3f4
CONTEXT:  PL/Perl function "test_perl_bytea"
  test_perl_bytea   
--------------------
 \x01020304f1f2f3f4
(1 row)

